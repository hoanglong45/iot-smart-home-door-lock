(this["webpackJsonpiot-smart-home-door-lock-client"]=this["webpackJsonpiot-smart-home-door-lock-client"]||[]).push([[0],{213:function(e,t,n){},214:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(0),c=n.n(r),i=n(35),s=n.n(i),o=(n(213),n(71)),d=n(141),l=n(38),u=n(354),j=n(90),b=(n(214),n(366)),m=n(367),f=n(119),O=n(120),p=n(138),x=n(137),h=n(355),y=n(157);y.a.initializeApp({apiKey:"AIzaSyCfTKQ-5sDNvN3QfC6S4oqeKOnbEv7AxzE",authDomain:"iot-smart-home-door-lock-7ccc9.firebaseapp.com",databaseURL:"https://iot-smart-home-door-lock-7ccc9.firebaseio.com",projectId:"iot-smart-home-door-lock-7ccc9",storageBucket:"iot-smart-home-door-lock-7ccc9.appspot.com",messagingSenderId:"513607106040",appId:"1:513607106040:web:d627644390357454e76a0d"});var v=y.a.database(),g=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={users:[]},e}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.ref("Access").on("value",(function(t){var n=t.val(),a=[];for(var r in n)a.unshift({id:r,name:n[r].name,rfid:n[r].rfid,accessDate:n[r].access_by_date,accessTime:n[r].access_by_time});e.setState({users:a})}))}},{key:"render",value:function(){var e=this.state.users;return Object(a.jsx)("div",{children:Object(a.jsx)(h.a,{dataSource:e,columns:[{title:"Name",dataIndex:"name"},{title:"RFID",dataIndex:"rfid"},{title:"Access by Date",dataIndex:"accessDate"},{title:"Access by Time",dataIndex:"accessTime"}],rowKey:"id"})})}}]),n}(c.a.Component),I=n(154),C=n.n(I),k=n(198),w=n(189),S=n(53),D=n(203),F=n(356),_=n(358),T=n(205),A=n(359),U=n(47),L=n(360),K=n(361),N=n(362),P=n(363),z=n(364),E=n(365),R=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.editableCell,r=e.mergedColumns,c=e.handleCancel;return Object(a.jsx)("div",{children:Object(a.jsx)(h.a,{components:{body:{cell:n}},bordered:!0,dataSource:t,columns:r,rowClassName:"editable-row",pagination:{onChange:c},rowKey:"id"})})}}]),n}(c.a.Component),q=n(204),V=n(357),B=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],s=F.a.useForm(),d=Object(o.a)(s,1)[0],l=e.arrUsers;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(V.a,{title:"Add new user",visible:c,onCancel:function(){i(!1)},footer:!1,children:Object(a.jsxs)(F.a,{form:d,name:"basic",initialValues:{remember:!0},onFinish:function(e){var t=v.ref("Users"),n=e.name,a=e.rfid,r=e.pin,c=(new Date).toLocaleDateString(),s=(new Date).toLocaleTimeString();if(function(e){for(var t in l)if(e===l[t].rfid)return!0;return!1}(a))q.b.error("RFID existed !");else{var o={name:n,rfid:a,pin:r,created_by_date:c,created_by_time:s};t.push(o),i(!1),d.resetFields()}},children:[Object(a.jsx)(F.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name"}],children:Object(a.jsx)(_.a,{})}),Object(a.jsx)(F.a.Item,{label:"RFID",name:"rfid",rules:[{required:!0,message:"Please input your RFID",pattern:/^[0-9]+$/}],children:Object(a.jsx)(_.a.Password,{type:"number"})}),Object(a.jsx)(F.a.Item,{label:"Pin",name:"pin",rules:[{required:!0,message:"Please input your pin",pattern:/^[0-9]+$/}],children:Object(a.jsx)(_.a.Password,{})}),Object(a.jsx)(F.a.Item,{children:Object(a.jsx)(U.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})}),Object(a.jsx)(U.a,{type:"primary",onClick:function(){i(!0)},children:"Add User"})]})},H=function(e){var t=e.editing,n=e.dataIndex,r=e.title,c=e.inputType,i=(e.record,e.index,e.children),s=Object(D.a)(e,["editing","dataIndex","title","inputType","record","index","children"]);return Object(a.jsx)("td",Object(S.a)(Object(S.a)({},s),{},{children:t?Object(a.jsx)(F.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(r,"! ").concat("number"===c?"requirement number":""),pattern:"number"===c&&/^[0-9]+$/}],children:Object(a.jsx)(_.a,{})}):i}))},$=function(){var e=F.a.useForm(),t=Object(o.a)(e,1)[0],n=Object(r.useState)(""),c=Object(o.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(""),l=Object(o.a)(d,2),u=l[0],j=l[1];Object(r.useEffect)((function(){v.ref("Users").on("value",(function(e){var t=e.val(),n=[];for(var a in t)n.push({id:a,name:t[a].name,rfid:t[a].rfid,pin:t[a].pin,createdDate:t[a].created_by_date,createdTime:t[a].created_by_time});s(n)}))}),[]);var b=function(e){return e.id===u},m=function(){j("")},f=function(e){switch(e){case"success":T.a[e]({message:"Success",description:"Updated successfully"});break;case"error":T.a[e]({message:"Error",description:"RFID existed !"})}},O=function(){var e=Object(w.a)(C.a.mark((function e(n){var a,r,c,o,d,l,u,b;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.ref("Users/".concat(n)),r=Object(k.a)(i),c=function(e){for(var t in r)if(e===r[t].rfid)return!0;return!1},e.prev=3,e.next=6,t.validateFields();case 6:o=e.sent,(d=r.findIndex((function(e){return n===e.id})))>-1?(l=r[d],u=l.createdDate,b=l.createdTime,c(o.rfid)?f("error"):(f("success"),r.splice(d,1,Object(S.a)(Object(S.a)({},l),o)),a.set(Object(S.a)(Object(S.a)({},o),{},{created_by_date:u,created_by_time:b})),s(r),j(""))):(r.push(o),s(r),j("")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Validate Failed:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,c=t.confirm,i=t.clearFilters;return Object(a.jsxs)("div",{style:{padding:8},children:[Object(a.jsx)(_.a,{ref:function(e){return e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return x(r,c,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(a.jsxs)(A.b,{children:[Object(a.jsx)(U.a,{type:"primary",onClick:function(){return x(r,c,e)},icon:Object(a.jsx)(K.a,{}),size:"small",style:{width:90},children:"Search"}),Object(a.jsx)(U.a,{onClick:function(){return h(i)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(a.jsx)(K.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){return e},render:function(e){return e}}},x=function(e,t,n){t()},h=function(e){e()},y=[Object(S.a)(Object(S.a)({title:"name",dataIndex:"name"},p("name")),{},{editable:!0}),Object(S.a)(Object(S.a)({title:"rfid",dataIndex:"rfid"},p("rfid")),{},{editable:!0}),{title:"pin",dataIndex:"pin",editable:!0},{title:"Created by Date",dataIndex:"createdDate"},{title:"Created by Time",dataIndex:"createdTime"},{title:"operation",dataIndex:"operation",render:function(e,n){return b(n)?Object(a.jsxs)(A.b,{size:"middle",children:[Object(a.jsxs)(U.a,{onClick:function(){return O(n.id)},children:["Save",Object(a.jsx)(N.a,{})]}),Object(a.jsx)(L.a,{title:"Sure to cancel?",onConfirm:m,children:Object(a.jsxs)(U.a,{children:["Cancel ",Object(a.jsx)(P.a,{})]})})]}):Object(a.jsxs)(A.b,{size:"middle",children:[Object(a.jsxs)(U.a,{disabled:""!==u,onClick:function(){return function(e){t.setFieldsValue(Object(S.a)({name:"",rfid:"",pin:""},e)),j(e.id)}(n)},children:["Edit",Object(a.jsx)(z.a,{style:{marginLeft:"5px"}})]}),Object(a.jsx)(L.a,{title:"Sure to delete?",onConfirm:function(){return g(n.id)},children:Object(a.jsxs)(U.a,{disabled:""!==u,children:[Object(a.jsx)("span",{children:"Delete"}),Object(a.jsx)(E.a,{})]})})]})}}],g=function(e){v.ref("Users/".concat(e)).remove()},I=y.map((function(e){return e.editable?Object(S.a)(Object(S.a)({},e),{},{onCell:function(t){return{record:t,inputType:"rfid"===e.dataIndex||"pin"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:b(t)}}}):e}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{arrUsers:i}),Object(a.jsx)(F.a,{form:t,component:!1,children:Object(a.jsx)(R,{users:i,editableCell:H,mergedColumns:I,handleCancel:m})})]})},J=u.a.Header,Q=u.a.Content,M=u.a.Footer,G=u.a.Sider;function W(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(d.a,{children:Object(a.jsxs)(u.a,{style:{minHeight:"100vh"},children:[Object(a.jsxs)(G,{collapsible:!0,collapsed:n,onCollapse:function(){c(!n)},children:[Object(a.jsx)("div",{className:"logo"}),Object(a.jsxs)(j.a,{theme:"dark",defaultSelectedKeys:["/access-log"],mode:"inline",children:[Object(a.jsxs)(j.a.Item,{icon:Object(a.jsx)(b.a,{}),children:["Access Log",Object(a.jsx)(d.b,{to:"/access-log"})]},"/access-log"),Object(a.jsxs)(j.a.Item,{icon:Object(a.jsx)(m.a,{}),children:["User Information",Object(a.jsx)(d.b,{to:"/user-info"})]},"/user-info")]})]}),Object(a.jsxs)(u.a,{className:"site-layout",children:[Object(a.jsx)(J,{className:"site-layout-background",style:{padding:0}}),Object(a.jsx)(Q,{style:{margin:"0 16px"},children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/user-info",component:$}),Object(a.jsx)(l.a,{exact:!0,path:"/access-log",component:g})]})}),Object(a.jsx)(M,{style:{textAlign:"center"},children:"Dashboard \xa92020 Created by Long Le Hoang"})]})]})})}s.a.render(Object(a.jsx)(W,{}),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.b5bfe786.chunk.js.map